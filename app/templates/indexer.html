{% extends "base.html" %}
{% block content %}
<h2 class="title">Food Indexer</h2>

<form method="post" class="search-form">
    <input type="text" name="query" placeholder="Search food items..." value="{{ query }}" required>
    <button type="submit">Search</button>
</form>

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class="error-messages">
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

{% if results %}
    <h3>Search Results:</h3>
    <div class="results-container">
        {% for id, name, description in results %}
        <a href="{{ url_for('main.food_detail', food_id=id) }}" class="result-item">
            <h4>{{ name }}</h4>
            <p>{{ description[:120] }}...</p>
        </a>
        {% endfor %}
    </div>
{% endif %}

<style>
.title {
    font-size: 2em; text-align:center; margin-bottom: 20px;
}
.search-form {
    display:flex; gap:10px; justify-content:center; margin-bottom:20px;
}
input[type="text"] {
    padding:12px; width:60%; border-radius:8px; border:1px solid #ddd; box-shadow:0 2px 6px rgba(0,0,0,0.1);
}
button {
    padding:12px 20px; border-radius:8px; border:none; background-color:#333; color:white; cursor:pointer; transition:0.3s;
}
button:hover {
    background-color:#000;
}
.results-container {
    display:grid; grid-template-columns:repeat(auto-fill,minmax(250px,1fr)); gap:15px;
}
.result-item {
    padding:15px; background:#fafafa; border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,0.1); text-decoration:none; color:black; transition:0.3s;
}
.result-item:hover {
    transform:translateY(-5px); box-shadow:0 8px 16px rgba(0,0,0,0.15);
}
.error-messages {
    color:red; text-align:center;
}
</style>
{% endblock %}
